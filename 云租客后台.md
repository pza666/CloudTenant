## 云租客后台（蓝白橙）

```js
// 1、对侧边栏组件进行单独封装方便操作各模块路由，Home 页面主要是由 elementui提供的布局日期分为：顶部（主页面）、侧边栏（抽离成组件）、内容（路由组件）区域组成，顶部是 flex布局，侧边栏主要是 NavMenu导航菜单，中间内容区域顶部是自己封装的面包屑导航，下面是点击后展现的路由组件

/* 2、admininfo路由：
	1.1.1：内容的可视区内顶部主要是做了一个可以查询管理员的搜索栏（主要是做节流操作，防止用户一直点击搜索而疯狂累积请求）
	1.1.2：并且对搜索出来的数据在切换页码以及每页显示条目数的时候进行数据对应切换
	
	1.2.1：添加管理员的功能（要注意数据回显），要提供的主要数据：手机、姓名、邮箱、职位，取消用了form组件提供的resetFields()进行重置校验规则和数据，点击确定后发请求 添加管理员 并且 重新获取数据列表
	1.2.2：修改管理员的功能，主要是第一个 手机号要禁用（唯一标识做账号），根据传过来的标题来判断是那个模块并且显示对应的数据，因为数据是一层的，所以直接赋值的话（会变为深拷贝），会随着 表格数据的修改 而 修改页面数据，所以要通过扩展运算符（浅拷贝），这样就能完美解决数据被 同步修改
	1.2.3：修改管理员密码的功能，主要也是禁用第一个字段（手机，唯一标识），然后校验旧密码和新密码（如：旧密码不能与拿到的管理员数据中的密码一致，新密码也是）重新输入新密码 就直接和 新密码 比较即可
	1.2.4：删除管理员的功能，直接调用接口传指定数据即可
	
	1.3：底部有一个分页器进行分页展示（要注意页面剩下最后一条数据删除后，要退回前一页）主要是在 重新获取数据列表的时候 判断当前页数组数据是否只剩下一条数据，是的话就表示当前删的数据是该页面的最后一条数据，从而页码值 -1，（注意不要等于0）否则还是当前页码值this.getadminInfoList(this.adminData.length == 1 ? (this.pageNum <= 1 ? 1 : this.pageNum--) : this.pageNum)
	
	1.4：下载 axios 以及引入 axios，并封装 axios 方便发送请求（配置了基础路径，请求发送最大时长）、在 main.js 中全局引入就不需要在每个页面中单独引入，配置了 请求拦截器 axios.interceptors.request.use(config => { return config }) 和 响应拦截器，将 request 换为 response */

/* 3、userinfo路由：
	1.1：对获取用户和搜索用户的弹窗信息进行封装。
	1.2：获取用户信息主要是对最新的页码值和页面条目数进行更新到最新的数值后发请求。
	1.3：搜索用户信息主要是引入 vue 脚手架自带的 lodash 包中的 throttle 对搜索功能做节流操作，在里面判断搜索框是否为空，空的话提示并返回，如果不为空则搜集数据发送请求获取数据。
	1.4：清除文本：重新调用获取用户信息方法。
	1.5：页码值切换 和 条目数切换 逻辑基本一致，主要是先更新值，并判断是搜索操作 还是 普通的查询操作，然后去做对应操作，只不过在切换条目数的回调中要将 页码值 重置为 1。
	1.6：修改用户信息：主要是将要修改的对应那条数据传进去，然后深拷贝一份出来（一层可用扩展运算符，不做深拷贝会数据回显），以及把要修改的 昵称nickname 赋值一份出来在点击 确定 的时候做对比。
	1.7：确认修改用户信息：直接验证是否符合校验规则，不符合直接返回出去让用户重新填写，如果验证通过解构出需要的数据，判断之前准备对比的数据是否修改了，如果没变不发请求，如果变了发请求修改数据并提示用户，接着判断是通过 搜索框修改的用户信息 还是 直接修改的用户信息，然后再去调用对应的回调。
	1.8：删除用户信息：先提示用户是否确认删除，如果确认删除 收集数据、传数据、调接口，如果是页面最后一条数据先前走一页，如果只剩下一页则仍然保留页码值为 1
	1.9：关闭修改用户信息的弹窗：先校验输入框是否因为用户的操作导致不满足校验规则，不满足不让其关闭，如果修改到最后还是原来的值，则不发请求关闭弹出框。 */

/* 4、login路由：
	1.1：登录路由主要是给页面设置了一个渐变背景色，中间放的是原生的html标签以及 v-model 绑定了 用户名 和 密码
	1.2：登录按钮主要是对用户名以及密码的 正则验证，验证通过发送请求（主要操作都在 Vuex里，用 Vuex 做数据的管理）、跳转路由 replace 方式跳转（替换），以及显现成功提示，验证不通过显现错误提示，还要在路由守卫中对其进行路由lan'jie判断，如果是登录状态不能通过修改 url 回到 login页，除非是退出登录 */

/* 5、Sidebar组件中包含了首页和侧边栏：
	1.1：其中首页里涵盖了两个卡片视图，1、左边的卡片视图主要包含了团队的一些信息（其中的上次登录时间是通过 localStorage 搭配 dayjs 包来实现，用户第一次登录时，从本地中获取值，如果没有显示是第一次登录的欢迎词，之后在用户退出的时候先将上一次的时间移除后再在本地存入一个时间，等用户下次进入的时候就直接在本地获取这个时间即可。2、右边的卡片视图包含了每周用户访问的数据图表 */

/* 难点1：通过路由守卫如果 next('路径') 后栈溢出的问题
			原因：是因为每次执行完 next('路径') 会重新执行一次 前置路由守卫 beforeEach，执行后又是回到了 next('路径')，之后就无限循环，直到栈溢出（可以在对应判断中打印数据查看）next()、next(false) 并不会，可以打印尝试
             解决方法：可以在合适的路径中通过 next() 放行，判断顺序很重要，next() 才能正确执行 */

    // 挂载路由导航守卫：注意不要让带有路径的next重复执行，否则会栈溢出，执行顺序很重要
    router.beforeEach((to, from, next) => {
      // 如果不是去登录页的话先获取是否有对应的token值，也就是是否登录状态中
      // const tokenStr = window.sessionStorage.getItem('token')
      // next()：放行    next('/login')：加上路径强制跳转   next(false)：返回来时的路由
      if (to.path === '/login' && !tokenStr) {
        // 第一种情况：没有token并且要去登录页让他重定向到登录页（因为上面一进来就重定向了）
        next()
      } else if (!tokenStr) {
        // 第二种情况：防止第一种情况没捕获到：如用户没登录想去其他页面调回登录页
        next('/login')
      } else if (tokenStr && to.path === '/login') {
        // 第三种情况：如果有token值还想回去登录页阻断
        next(false)
      } else if (tokenStr) {
        // 第四种情况：在有token之后除了去登录页其他页面都可以去
        next()
      }
    })

	/* 难点2：在用户切换页码过于频繁的情况下页面会疯狂跳动闪烁
				原因：是由于用户的误操作导致每次切换页码的时候都会发一次请求，所以每次请求都会被累积下来，一旦请求累积过多，压到最后就会接连返回，从而导致页面显示异常
				解决方法：在封装 axios 请求中下载引入了 nprogress 包 import Nprogress from "nprogress"; 以及引入对应的样式包 import 'nprogress/nprogress.css'; 可以完美解决请求过于频繁，导致数据显示错乱，会将叠加的请求叠加到最后只发送最后一个请求，还可以美化请求时顶部请求的进度条样式 */

/*  */

/*  */

/*  */
```

## 云租客后端（node）

```js
// 项目中用到的包有，express（框架）、mysql（连接数据库）、cors（解决跨域）、nodemon（监听服务器）
// 数据库连接中这一配置项开启后，就可同时写多条查询语句：（用模板字符串，每条语句用符号做分隔符）multipleStatements（多语句）
    multipleStatements: true
// 路由的划分，采用模块化，每个路由对应的回调都抽离出来，放到对应的 js 文件中进行管理，在每一个模块中都挂载对应的接口，最后向外暴露一个对象，在主文件中导入对应的路由回调，以及导入express，把路由则都写在路由主文件中，然后导出对应路由，最后在主文件app.js中把接口文件导入并注册成中间件即可挂载上所有接口。

// 用户模块中包含：（都采取query传参方式：? k=v & k=v）
	(get)获取用户信息：'http://127.0.0.1:8081/getUserInfo?pageNum=${pageNum}&pageSize=${pageSize}'
(get)查用户信息：'http://127.0.0.1:8081/searchUserInfo?username=${username}&pageNum=${pageNum}&pageSize=${pageSize}'
	(put)更新用户信息：'http://127.0.0.1:8081/editUser?phone=${phone}&nickname=${nickname}'
	(delete)删除用户信息：'http://127.0.0.1:8081/deleteUser?phone=${phone}'
  
// 租赁房源
     
// 二手房源
	
// 房源发布
     
```

